function [disparity_x, disparity_y] = getDisparity(im1, im2, fundMatrix)
    x_len = size(im1, 1);
    y_len = size(im1, 2);
    ncc_max = zeros();
    dx = zeros();
    dy = zeros();
    for i = 1:x_len
        for j = 1:y_len
            xl = [i j 1];
            xr_e = xl * fundMatrix;
            % Making quick assumption that line is horizontal since that is
            % true for both examples. Will try to expand to apply to sloped
            % lines if time allows
            row = xr_e(3);
            if(row > 1 && row < size(im2,1))
                points = [1:x_len; ones(1,x_len) * row];
                ncc_max = ncc(im1, im2, xl, points, 2, 0.1, row );
                dx(i,j) = i - ncc_max);
                dy(i,j) = j - row;
            else
                dx(i,j) = 0;
                dy(i,j) = 0;
            end
        end
    end
    
    disparity_x = dx;
    disparity_y = dy;
    
    